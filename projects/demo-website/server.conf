{
  # Optional: Global settings (e.g., email for Let's Encrypt)
  # email ${DOMAIN_ADMIN_EMAIL}
  # acme_dns cloudflare API_KEY  # Only needed if using DNS challenge
}

${DOMAIN_NAME} ${DOMAIN_ALIASES} {
  # Static files
  handle /static/* { # Changed from handle_path to handle
    root * /shared-files/${DOMAIN_NAME}
    file_server
  }

  # Media files
  handle /media/* { # Changed from handle_path to handle
    root * /shared-files/${DOMAIN_NAME}
    file_server
  }

  # Reverse proxy to your app
  reverse_proxy http://${DOCKER_NETWORK_SERVICE_ALIAS}:${APP_PORT}
}